<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 4: GNSS & Positioning | GIS Digital Textbook</title>
    <meta name="description" content="Explore Global Navigation Satellite Systems (GNSS). Learn how GPS works, the three segments of navigation, and how to improve positioning accuracy.">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #3b82f6;
            --secondary: #64748b;
            --accent: #f59e0b;
            --success: #10b981;
            --bg: #f8fafc;
        }

        .hero-chapter {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            padding: 5rem 2rem;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .hero-chapter::before {
            content: "";
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 50px 50px;
        }

        .chapter-badge {
            display: inline-block;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(4px);
            padding: 0.5rem 1.5rem;
            border-radius: 999px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 1.5rem;
            border: 1px solid rgba(255,255,255,0.3);
        }

        h1 { font-size: clamp(2.5rem, 5vw, 4rem); margin-bottom: 1rem; }
        .subtitle { font-size: 1.25rem; opacity: 0.9; max-width: 800px; margin: 0 auto; line-height: 1.6; }

        .layout-grid {
            display: grid;
            grid-template-columns: 1fr 340px;
            gap: 2rem;
            margin-top: 3rem;
        }

        @media (max-width: 1100px) {
            .layout-grid { grid-template-columns: 1fr; }
        }

        .sidebar-box {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
            border-top: 4px solid var(--primary);
        }
        .sidebar-box.local { border-top-color: var(--accent); }

        .sidebar-box h3 { margin-top: 0; font-size: 1.1rem; border-bottom: 1px solid #eee; padding-bottom: 0.5rem; margin-bottom: 1rem; }
        .bio-img { width: 100%; border-radius: 8px; margin-bottom: 1rem; }

        .card { background: white; padding: 2.5rem; border-radius: 16px; margin-bottom: 2rem; box-shadow: 0 4px 6px rgba(0,0,0,0.02); }
        
        /* GNSS Table */
        .gnss-table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
        .gnss-table th, .gnss-table td { padding: 0.75rem; border-bottom: 1px solid #eee; text-align: left; font-size: 0.9rem; }
        .gnss-table th { background: #f8fafc; font-weight: 700; }

        /* Accuracy Viz Container */
        .viz-container { background: #0f172a; border-radius: 16px; padding: 2rem; color: #fff; margin: 2rem 0; text-align: center; }
        #gpsCanvas { background: #000; border: 1px solid #334155; border-radius: 8px; max-width: 100%; height: auto; }

        /* Quiz Styles */
        .quiz-container { background: #eff6ff; padding: 2rem; border-radius: 16px; margin-top: 3rem; }
        .option { background: white; padding: 1rem; border-radius: 8px; border: 2px solid #e2e8f0; cursor: pointer; margin-bottom: 0.75rem; transition: 0.2s; color: #1e293b; }
        .option:hover { border-color: var(--primary); }
        .option.correct { border-color: var(--success); background: #ecfdf5; }
        .option.wrong { border-color: #ef4444; background: #fff1f2; }
    </style>
</head>
<body>

    <header class="hero-chapter">
        <div class="container">
            <span class="chapter-badge">Chapter 4</span>
            <h1>GNSS & Positioning</h1>
            <p class="subtitle">Finding your place on Earth. Learn the science behind Global Navigation Satellite Systems and how we achieve high-precision positioning across the globe.</p>
        </div>
    </header>

    <main class="container">
        <nav style="margin: 2rem 0;">
            <a href="../index.html" style="text-decoration: none; color: var(--primary); font-weight: 600;">&larr; Back to Dashboard</a>
        </nav>

        <div class="layout-grid">
            <div class="content">
                <section class="card">
                    <h2>What is GNSS?</h2>
                    <p><strong>GNSS</strong> (Global Navigation Satellite System) is the umbrella term for satellite constellations that provide positioning, navigation, and timing (PNT) data. While <strong>GPS</strong> (Global Positioning System) is the most famous, it is actually just one of several systems operated worldwide.</p>
                    
                    <table class="gnss-table">
                        <thead>
                            <tr>
                                <th>System</th>
                                <th>Country</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>GPS</td><td>USA</td><td>Global</td></tr>
                            <tr><td>GLONASS</td><td>Russia</td><td>Global</td></tr>
                            <tr><td>Galileo</td><td>European Union</td><td>Global</td></tr>
                            <tr><td>BeiDou</td><td>China</td><td>Global</td></tr>
                        </tbody>
                    </table>
                </section>

                <section class="card">
                    <h2>The Three Segments</h2>
                    <ul style="line-height: 2;">
                        <li><strong>Space Segment:</strong> The constellation of satellites broadcasting signals.</li>
                        <li><strong>Control Segment:</strong> Ground stations that track satellites and upload orbital corrections.</li>
                        <li><strong>User Segment:</strong> Your receiver (phone, car, survey gear) that calculates your position.</li>
                    </ul>
                </section>

                <section class="viz-container">
                    <h3>Accuracy Visualizer</h3>
                    <p style="color: #94a3b8; font-size: 0.8rem; margin-bottom: 1rem;">Reading satellite signals in real-time...</p>
                    <canvas id="gpsCanvas" width="400" height="300"></canvas>
                    <div style="margin-top: 1rem; font-family: monospace;" id="accuracy-readout">Accuracy: Â±2.5m</div>
                </section>

                <section class="card">
                    <h2>Summary of Big Ideas</h2>
                    <ul style="line-height: 1.8;">
                        <li><strong>Trilateration:</strong> The mathematical process of finding your location by measuring distances to 4 or more satellites.</li>
                        <li><strong>Differential GPS (DGPS):</strong> Using a stationary base station at a known point to correct errors for a mobile receiver.</li>
                        <li><strong>DOP (Dilution of Precision):</strong> A measure of how much your geometry (satellite positions) affects your accuracy.</li>
                        <li><strong>Error Sources:</strong> Atmospheric delays, signal multipath (bouncing off buildings), and orbital drift.</li>
                    </ul>
                </section>

                <div class="quiz-container">
                    <h2>Chapter 4 Checkpoint</h2>
                    <div class="question">
                        <p><strong>1. How many satellites are required to determine a 3D position (Lat, Lon, Alt) + Time?</strong></p>
                        <div class="option" onclick="this.classList.add('wrong')">3 Satellites</div>
                        <div class="option" onclick="this.classList.add('correct')">4 Satellites</div>
                    </div>
                    <div class="question">
                        <p><strong>2. Which component is responsible for uploading clock and orbital corrections to the satellites?</strong></p>
                        <div class="option" onclick="this.classList.add('wrong')">Space Segment</div>
                        <div class="option" onclick="this.classList.add('correct')">Control Segment</div>
                    </div>
                </div>

                <section class="card" style="margin-top: 3rem;">
                    <h2>ðŸ“š Glossary</h2>
                    <dl>
                        <dt><strong>GNSS:</strong></dt>
                        <dd>Global Navigation Satellite Systemâ€”the general term for all satellite navigation constellations.</dd>
                        
                        <dt><strong>Multipath:</strong></dt>
                        <dd>An error caused when satellite signals reflect off buildings or terrain before hitting the receiver.</dd>
                        
                        <dt><strong>WAAS:</strong></dt>
                        <dd>Wide Area Augmentation Systemâ€”a system of ground stations and satellites that improve GPS accuracy for aviation.</dd>
                    </dl>
                </section>
            </div>

            <aside class="sidebar">
                <div class="sidebar-box bio">
                    <h3>Important Person</h3>
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/cd/Gladys_West_at_the_Pentagon.jpg/220px-Gladys_West_at_the_Pentagon.jpg" alt="Gladys West" class="bio-img">
                    <p><strong>Dr. Gladys West</strong></p>
                    <p>A mathematician whose work at the U.S. Naval Proving Ground was essential to the development of the GPS system. She processed satellite data and developed the mathematical models of the Earth's shape (geoid) that every GPS receiver on Earth uses today to calculate height and location.</p>
                </div>

                <div class="sidebar-box local">
                    <h3>Local to Global</h3>
                    <p><strong>GPS in the Permian Basin</strong></p>
                    <p>Texas is one of the world's leading energy producers. In the Permian Basin, GNSS is used for everything from the centimeter-precise placement of drilling rigs to tracking the fleets of trucks moving equipment across West Texas. Without high-precision GPS, the modern energy economy of Texasâ€”and the global energy supplyâ€”would grind to a halt.</p>
                </div>
            </aside>
        </div>

        <div class="chapter-nav" style="display: flex; justify-content: space-between; margin-top: 4rem; padding-top: 2rem; border-top: 1px solid #ddd;">
          <a href="chapter-03-projections.html" style="text-decoration: none; color: var(--secondary);">&larr; Chapter 3: Projections</a>
          <a href="chapter-05-georeferencing.html" style="text-decoration: none; color: var(--primary); font-weight: 700;">Chapter 5: Georeferencing &rarr;</a>
        </div>
    </main>

    <footer style="margin-top: 4rem; padding: 3rem 0; background: #f1f5f9; text-align: center;">
        <div class="container">
            <p>&copy; 2026 Dr. Moulay Anwar Sounny-Slitine. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        const canvas = document.getElementById('gpsCanvas');
        const ctx = canvas.getContext('2d');
        let points = [];

        function animate() {
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Draw grid
            ctx.strokeStyle = '#1e293b';
            ctx.lineWidth = 1;
            for(let i=0; i<canvas.width; i+=40) {
                ctx.beginPath(); ctx.moveTo(i,0); ctx.lineTo(i,canvas.height); ctx.stroke();
                ctx.beginPath(); ctx.moveTo(0,i); ctx.lineTo(canvas.width,i); ctx.stroke();
            }

            // Central target
            ctx.strokeStyle = '#3b82f6';
            ctx.beginPath(); ctx.arc(200, 150, 10, 0, Math.PI*2); ctx.stroke();

            // Random walk points
            if (points.length < 50) {
                points.push({ x: 200 + (Math.random()-0.5)*40, y: 150 + (Math.random()-0.5)*40 });
            } else {
                points.shift();
                points.push({ x: 200 + (Math.random()-0.5)*40, y: 150 + (Math.random()-0.5)*40 });
            }

            points.forEach((p, i) => {
                ctx.fillStyle = `rgba(16, 185, 129, ${i/50})`;
                ctx.beginPath(); ctx.arc(p.x, p.y, 3, 0, Math.PI*2); ctx.fill();
            });

            requestAnimationFrame(animate);
        }
        animate();
    </script>
</body>
</html>
