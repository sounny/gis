<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 4: GNSS & Positioning | GIS Digital Textbook</title>
    <meta name="description" content="Explore Global Navigation Satellite Systems (GNSS). Learn how GPS works, the three segments of navigation, and how to improve positioning accuracy.">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #3b82f6;
            --secondary: #64748b;
            --accent: #f59e0b;
            --success: #10b981;
            --bg: #f8fafc;
        }

        .hero-chapter {
            background: linear-gradient(rgba(30, 58, 138, 0.7), rgba(59, 130, 246, 0.8)), url('../assets/img/hero_chapter04.png');
            background-size: cover;
            background-position: center;
            padding: 5rem 2rem;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .hero-chapter::before {
            content: "";
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 50px 50px;
        }

        .chapter-badge {
            display: inline-block;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(4px);
            padding: 0.5rem 1.5rem;
            border-radius: 999px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 1.5rem;
            border: 1px solid rgba(255,255,255,0.3);
        }

        h1 { font-size: clamp(2.5rem, 5vw, 4rem); margin-bottom: 1rem; }
        .subtitle { font-size: 1.25rem; opacity: 0.9; max-width: 800px; margin: 0 auto; line-height: 1.6; }

        .layout-grid {
            display: grid;
            grid-template-columns: 1fr 340px;
            gap: 2rem;
            margin-top: 3rem;
        }

        @media (max-width: 1100px) {
            .layout-grid { grid-template-columns: 1fr; }
        }

        .sidebar-box {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
            border-top: 4px solid var(--primary);
        }
        .sidebar-box.local { border-top-color: var(--accent); }

        .sidebar-box h3 { margin-top: 0; font-size: 1.1rem; border-bottom: 1px solid #eee; padding-bottom: 0.5rem; margin-bottom: 1rem; }
        .bio-img { width: 100%; border-radius: 8px; margin-bottom: 1rem; }

        .card { background: white; padding: 2.5rem; border-radius: 16px; margin-bottom: 2rem; box-shadow: 0 4px 6px rgba(0,0,0,0.02); }
        
        /* GNSS Table */
        .gnss-table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
        .gnss-table th, .gnss-table td { padding: 0.75rem; border-bottom: 1px solid #eee; text-align: left; font-size: 0.9rem; }
        .gnss-table th { background: #f8fafc; font-weight: 700; }

        /* Accuracy Viz Container */
        .viz-container { background: #0f172a; border-radius: 16px; padding: 2rem; color: #fff; margin: 2rem 0; text-align: center; }
        #gpsCanvas { background: #000; border: 1px solid #334155; border-radius: 8px; max-width: 100%; height: auto; }

        /* Quiz Styles */
        .quiz-container { background: #eff6ff; padding: 2rem; border-radius: 16px; margin-top: 3rem; }
        .option { background: white; padding: 1rem; border-radius: 8px; border: 2px solid #e2e8f0; cursor: pointer; margin-bottom: 0.75rem; transition: 0.2s; color: #1e293b; }
        .option:hover { border-color: var(--primary); }
        .option.correct { border-color: var(--success); background: #ecfdf5; }
        .option.wrong { border-color: #ef4444; background: #fff1f2; }
    </style>
</head>
<body>

    <header class="hero-chapter">
        <div class="container">
            <span class="chapter-badge">Chapter 4</span>
            <h1>GNSS & Positioning</h1>
            <p class="subtitle">Positioning on Earth. Discover the science behind Global Navigation Satellite Systems and the methods for achieving high-precision positioning across the globe.</p>
        </div>
    </header>

    <main class="container">
        <nav style="margin: 2rem 0;">
            <a href="../index.html" style="text-decoration: none; color: var(--primary); font-weight: 600;">&larr; Back to Dashboard</a>
        </nav>


        <section class="card learning-scaffold" aria-label="Learning scaffold">
            <details class="learning-scaffold-details">
  <summary>
<div class="scaffold-head">
                <h2>At a Glance</h2>
                <div class="scaffold-meta" aria-label="Prerequisites and time estimate">
                    <span class="scaffold-chip"><strong>Prereqs:</strong> Chapter 03</span>
                    <span class="scaffold-chip"><strong>Time:</strong> 20 min read + 20 min practice</span>
                    <span class="scaffold-chip"><strong>Deliverable:</strong> Field collection plan</span>
                </div>
            </div>
  </summary>

            <div class="scaffold-grid">
                <div class="scaffold-card">
                    <h3>Learning outcomes</h3>
                    <ul>
                        <li>Explain how GNSS positioning works at a high level.</li>
                        <li>Identify factors that reduce accuracy (multipath, poor geometry).</li>
                        <li>Plan a basic field collection workflow for validation/GCPs.</li>
                    </ul>
                </div>

                <div class="scaffold-card">
                    <h3>Key terms</h3>
                    <p>GNSS, trilateration, multipath, DOP, differential correction, datum</p>
                </div>
            </div>

            <div class="scaffold-grid">
                <div class="scaffold-card">
                    <h3>Stop &amp; check</h3>
                    <ol class="scaffold-qa">
                        <li>
                            <details>
                                <summary>What usually causes multipath error?</summary>
                                <div>
                                    <p><strong>Answer:</strong> Signals reflecting off buildings/terrain before reaching the receiver.</p>
                                    <p><strong>Why:</strong> Reflections increase path length and bias the range estimate.</p>
                                    <p><strong>Common misconception:</strong> More satellites always guarantees better accuracy; geometry and environment matter.</p>
                                </div>
                            </details>
                        </li>
                        <li>
                            <details>
                                <summary>Why does CRS/datum matter for GNSS points?</summary>
                                <div>
                                    <p><strong>Answer:</strong> Because coordinates depend on the reference model used.</p>
                                    <p><strong>Why:</strong> A mismatch can create consistent offsets between layers.</p>
                                    <p><strong>Common misconception:</strong> Latitude/longitude is universal and automatically matches every map.</p>
                                </div>
                            </details>
                        </li>
                    </ol>
                </div>

                <div class="scaffold-card">
                    <h3>Try it (5 minutes)</h3>
                    <ol>
                        <li>List 3 places on campus/city where GNSS accuracy would likely be poor.</li>
                        <li>For each, write one mitigation (move, wait, repeat, use correction).</li>
                    </ol>
                </div>
            </div>

            <div class="scaffold-grid">
                <div class="scaffold-card">
                    <h3>Lab (Two Tracks)</h3>
                    <p>Both tracks produce the same deliverable: a one-page plan describing the collection of validation points for an imagery analysis.</p>
                    <div class="scaffold-two-track">
                        <div class="scaffold-track">
                            <h4>Desktop GIS Track (ArcGIS Pro / QGIS)</h4>
                            <p>Design a point feature class or form schema (fields + domains). Define required metadata (time, accuracy, notes).</p>
                        </div>
                        <div class="scaffold-track">
                            <h4>Remote Sensing Track (Google Earth Engine)</h4>
                            <p>Define an AOI and draft a validation sampling plan (how many points per class and where you would collect them).</p>
                        </div>
                    </div>
                </div>

                <div class="scaffold-card">
                    <h3>Common mistakes</h3>
                    <ul>
                        <li>Collecting points with unknown CRS/datum or missing metadata.</li>
                        <li>Taking one reading and assuming it is correct (no repeats).</li>
                        <li>Collecting under tree canopy/near buildings without noting expected error.</li>
                    </ul>
                    <p><strong>Further reading:</strong> https://gistbok-ltb.ucgis.org/</p>
                </div>
            </div>
        </details></section>


        <div class="layout-grid">
            <div class="content">
                <section class="card">
                    <h2>What is GNSS?</h2>
                    <p><strong>GNSS</strong> (Global Navigation Satellite System) is the umbrella term for satellite constellations that provide positioning, navigation, and timing (PNT) data. While <strong>GPS</strong> (Global Positioning System) is the most famous, it is actually just one of several systems operated worldwide. For official US government information, visit <a href="https://www.gps.gov/" target="_blank" style="color:var(--primary);">GPS.gov</a>.</p>
                    
                    <table class="gnss-table">
                        <thead>
                            <tr>
                                <th>System</th>
                                <th>Country</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>GPS</td><td>USA</td><td>Global</td></tr>
                            <tr><td>GLONASS</td><td>Russia</td><td>Global</td></tr>
                            <tr><td>Galileo</td><td>European Union</td><td>Global</td></tr>
                            <tr><td>BeiDou</td><td>China</td><td>Global</td></tr>
                        </tbody>
                    </table>
                </section>

                <section class="card">
                    <h2>The Three Segments</h2>
                    <ul style="line-height: 2;">
                        <li><strong>Space Segment:</strong> The constellation of satellites broadcasting signals.</li>
                        <li><strong>Control Segment:</strong> Ground stations that track satellites and upload orbital corrections.</li>
                        <li><strong>User Segment:</strong> A receiver (phone, car, survey gear) that calculates the position.</li>
                    </ul>
                </section>

                <section class="viz-container">
                    <h3>Accuracy Visualizer</h3>
                    <p style="color: #94a3b8; font-size: 0.8rem; margin-bottom: 1rem;">Reading satellite signals in real-time...</p>
                    <canvas id="gpsCanvas" width="400" height="300"></canvas>
                    <div style="margin-top: 1rem; font-family: monospace;" id="accuracy-readout">Accuracy: ¬±2.5m</div>
                </section>

                <section class="card">
                    <h2>Interactive: Trilateration Simulator</h2>
                    <p>Drag the 3 satellites to see how their signal spheres overlap to pinpoint a location. Notice how poor geometry (satellites in a line) creates a larger area of uncertainty.</p>
                    
                    <div id="trilateration-sim" style="background:#0f172a; height:400px; border-radius:12px; position:relative; overflow:hidden; touch-action: none;">
                        <canvas id="triCanvas" width="800" height="400" style="width:100%; height:100%"></canvas>
                        <div style="position:absolute; bottom:10px; left:10px; color:white; font-family:monospace; background:rgba(0,0,0,0.5); padding:5px; border-radius:4px;">
                            Drag the satellites (üõ∞Ô∏è)!
                        </div>
                    </div>
                </section>

                <section class="card">
                    <h2>How Trilateration Works</h2>
                    <p>The core math behind GPS is <strong>Trilateration</strong>. It's like a high-tech version of triangulation, but using spheres instead of triangles.</p>
                    
                    <div style="display: flex; gap: 2rem; align-items: center; flex-wrap: wrap; margin-top: 2rem;">
                        <div style="flex: 1; min-width: 300px;">
                            <img src="../assets/img/diagrams/gps_trilateration.png" alt="GPS Trilateration Diagram" style="width: 100%; border-radius: 12px; box-shadow: var(--shadow-md);">
                        </div>
                        <div style="flex: 1; min-width: 300px;">
                            <ol style="line-height: 1.8;">
                                <li><strong>1 Satellite:</strong> The location exists on a sphere of radius $R_1$ from the satellite.</li>
                                <li><strong>2 Satellites:</strong> The intersection of two spheres is a <strong>circle</strong>. The location exists on that circle.</li>
                                <li><strong>3 Satellites:</strong> The intersection of the circle and a third sphere narrows it down to <strong>two points</strong>. One is usually way out in space, the other is on Earth.</li>
                                <li><strong>4 Satellites:</strong> The fourth sphere resolves the ambiguity and corrects for <strong>time bias</strong> in the receiver's clock. TV + 3D Position.</li>
                            </ol>
                            
                            <div class="callout warning" style="border-left-color: #ef4444; background: #fff1f2; color: #991b1b; margin-top:2rem;">
                                <strong>üõë Ethics: The "Strava" Problem</strong>
                                <p>GPS creates a digital trail of your life. In 2018, the fitness app Strava released a "Heatmap" of user runs. It inadvertently revealed secret US military bases because soldiers were tracking their jogs around the perimeter. <strong>Location Privacy</strong> is a massive ethical issue in GIS.</p>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="card">
                    <h2>Summary of Big Ideas</h2>
                    <ul style="line-height: 1.8;">
                        <li><strong>Trilateration:</strong> The mathematical process of finding the location by measuring distances to 4 or more satellites.</li>
                        <li><strong>Differential GPS (DGPS):</strong> Using a stationary base station at a known point to correct errors for a mobile receiver.</li>
                        <li><strong>DOP (Dilution of Precision):</strong> A measure of how much the satellite geometry (positions) affects positioning accuracy.</li>
                        <li><strong>Error Sources:</strong> Atmospheric delays, signal multipath (bouncing off buildings), and orbital drift.</li>
                    </ul>
                </section>

                <div class="quiz-container">
                    <h2>Chapter 4 Checkpoint</h2>
                    <div class="question">
                        <p><strong>1. How many satellites are required to determine a 3D position (Lat, Lon, Alt) + Time?</strong></p>
                        <div class="option" onclick="this.classList.add('wrong')">3 Satellites</div>
                        <div class="option" onclick="this.classList.add('correct')">4 Satellites</div>
                    </div>
                    <div class="question">
                        <p><strong>2. Which component is responsible for uploading clock and orbital corrections to the satellites?</strong></p>
                        <div class="option" onclick="this.classList.add('wrong')">Space Segment</div>
                        <div class="option" onclick="this.classList.add('correct')">Control Segment</div>
                    </div>
                </div>

                <div class="section-glossary">
                    <h2>üìö Chapter Glossary</h2>
                    <div class="glossary-list">
                        <div class="glossary-item">
                            <span class="glossary-term">GNSS (Global Navigation Satellite System)</span>
                            <span class="glossary-def">The general umbrella term for all satellite navigation constellations, including GPS (USA), Galileo (EU), GLONASS (Russia), and BeiDou (China).</span>
                        </div>
                        <div class="glossary-item">
                            <span class="glossary-term">Multipath Error</span>
                            <span class="glossary-def">A positioning error caused when satellite signals reflect off buildings or terrain before hitting the receiver, artificially extending the signal path.</span>
                        </div>
                        <div class="glossary-item">
                            <span class="glossary-term">Trilateration</span>
                            <span class="glossary-def">The mathematical method used by GPS receivers to calculate position by measuring distances to at least four satellites.</span>
                        </div>
                    </div>
                </div>
            </div>

            <aside class="sidebar">
                <div class="box-bio">
                    <img src="../assets/img/people/gladys_west.png" alt="Gladys West">
                    <div>
                        <h3>Dr. Gladys West</h3>
                        <p>A mathematician whose work at the U.S. Naval Proving Ground was essential to the development of the GPS system. She processed satellite data and developed the mathematical models of the Earth's shape (geoid) that every GPS receiver on Earth uses today to calculate height and location.</p>
                    </div>
                </div>

                <div class="box-bio">
                    <img src="../assets/img/people/greg_winfree.png" alt="Greg Winfree">
                    <div>
                        <h3>Greg Winfree</h3>
                        <p>A prominent national leader in <strong>Positioning, Navigation, and Timing (PNT)</strong> policy. Currently the Agency Director of the Texas A&M Transportation Institute (TTI), he previously served as Assistant Secretary at the U.S. DOT, overseeing the <strong>National Transportation Atlas Database (NTAD)</strong>. His research now integrates high-precision GNSS with "Smart Transportation" and automated vehicle (V2X) systems.</p>
                    </div>
                </div>

                <div class="sidebar-box" style="border-top-color: #64748b;">
                    <h3>üì∫ Blast from the Past</h3>
                    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: 8px; margin-bottom: 1rem;">
                        <iframe 
                            src="https://www.youtube.com/embed/EpA8Lf8Gt1Q?si=88jEwlEQZqstHtMj" 
                            style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0;"
                            title="1986: Satellite Navigation for Cars of the Future" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                            allowfullscreen></iframe>
                    </div>
                    <p style="font-size: 0.85rem; line-height: 1.4;">
                        <strong>1986: Satellite Navigation for Cars of the Future.</strong> 
                        "It may not look futuristic, but this is a highly intelligent car." 
                        BBC presenters explore the earliest concept cars using satellite guidance‚Äîlong before the technology was available to the public.
                    </p>
                </div>

                <div class="sidebar-local-global">
                    <h3>üá®üá± Texas Connection</h3>
                    <p><strong>GPS in the Permian Basin</strong></p>
                    <p>Texas is one of the world's leading energy producers. In the Permian Basin, GNSS is used for everything from the centimeter-precise placement of drilling rigs to tracking the fleets of trucks moving equipment across West Texas. Without high-precision GPS, the modern energy economy of Texas, and the global energy supply, would grind to a halt.</p>
                    <a href="https://www.txdot.gov/business/maintenance/precisionsurvey.html" target="_blank" class="btn btn-primary" style="margin-top:1rem; font-size:0.8rem; width:100%; text-align:center;">TxDOT Real-Time Network</a>
                </div>
            </aside>
        </div>

        <div class="chapter-nav" style="display: flex; justify-content: space-between; margin-top: 4rem; padding-top: 2rem; border-top: 1px solid #ddd;">
          <a href="chapter-03-projections.html" style="text-decoration: none; color: var(--secondary);">&larr; Chapter 3: Projections</a>
          <a href="chapter-05-analysis.html" style="text-decoration: none; color: var(--primary); font-weight: 700;">Chapter 5: Spatial Analysis &rarr;</a>
        </div>
    

        

        

        <section class="card bok-alignment" aria-label="Body of Knowledge alignment">
            <h2>BoK Alignment</h2>
            <p>
                Topics in the UCGIS GIS&amp;T Body of Knowledge that support this chapter.
            </p>
            <ul class="bok-topic-list">
                        <li class="bok-topic">
            <span class="bok-code">DC-02-003</span>
            <a href="https://gistbok-ltb.ucgis.org/page/34/concept/10599" target="_blank" rel="noopener noreferrer">Global Navigation Satellite Systems</a>
        </li>
                        <li class="bok-topic">
            <span class="bok-code">DC-06-009</span>
            <a href="https://gistbok-ltb.ucgis.org/page/34/concept/10602" target="_blank" rel="noopener noreferrer">Field Data Capture Technologies</a>
        </li>
                        <li class="bok-topic">
            <span class="bok-code">DM-05-052</span>
            <a href="https://gistbok-ltb.ucgis.org/page/34/concept/10647" target="_blank" rel="noopener noreferrer">Horizontal (Geometric) Datums</a>
        </li>
                        <li class="bok-topic">
            <span class="bok-code">DM-05-047</span>
            <a href="https://gistbok-ltb.ucgis.org/page/34/concept/10808" target="_blank" rel="noopener noreferrer">Geographic Coordinate Systems</a>
        </li>
                        <li class="bok-topic">
            <span class="bok-code">GS-01-004</span>
            <a href="https://gistbok-ltb.ucgis.org/page/34/concept/10708" target="_blank" rel="noopener noreferrer">Location Privacy</a>
        </li>
                        <li class="bok-topic">
            <span class="bok-code">BoK</span>
            <a href="https://gistbok-ltb.ucgis.org/" target="_blank" rel="noopener noreferrer">UCGIS GIS&T Body of Knowledge (Living Textbook)</a>
        </li>
            </ul>
        </section>

</main>

    <footer style="margin-top: 4rem; padding: 3rem 0; background: #f1f5f9; text-align: center;">
        <div class="container">
            <p>&copy; 2026 Dr. Moulay Anwar Sounny-Slitine. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        const canvas = document.getElementById('triCanvas');
        const ctx = canvas.getContext('2d');
        
        let sats = [
            { id: 1, x: 150, y: 100, r: 120, dragging: false, color: '#FF4444' },
            { id: 2, x: 650, y: 100, r: 120, dragging: false, color: '#44FF44' },
            { id: 3, x: 400, y: 300, r: 120, dragging: false, color: '#4444FF' }
        ];

        // Resize handling
        function resize() {
            canvas.width = canvas.parentElement.clientWidth;
            canvas.height = canvas.parentElement.clientHeight;
        }
        window.addEventListener('resize', resize);
        resize();

        // Mouse Events
        function getPos(e) {
            const rect = canvas.getBoundingClientRect();
            const x = (e.clientX || e.touches[0].clientX) - rect.left;
            const y = (e.clientY || e.touches[0].clientY) - rect.top;
            return {x, y};
        }

        canvas.addEventListener('mousedown', startDrag);
        canvas.addEventListener('touchstart', startDrag);
        window.addEventListener('mousemove', drag);
        window.addEventListener('touchmove', drag);
        window.addEventListener('mouseup', endDrag);
        window.addEventListener('touchend', endDrag);

        function startDrag(e) {
            const p = getPos(e);
            sats.forEach(s => {
                const dx = p.x - s.x;
                const dy = p.y - s.y;
                if(Math.sqrt(dx*dx + dy*dy) < 20) {
                    s.dragging = true;
                }
            });
        }

        function drag(e) {
            sats.forEach(s => {
                if(s.dragging) {
                    const p = getPos(e);
                    s.x = p.x;
                    s.y = p.y;
                }
            });
        }

        function endDrag() {
            sats.forEach(s => s.dragging = false);
        }

        function draw() {
            ctx.fillStyle = '#0f172a';
            ctx.fillRect(0,0,canvas.width, canvas.height);

            // Draw Target "Earth" Grid
            ctx.strokeStyle = '#334155';
            ctx.lineWidth = 1;
            for(let i=0; i<canvas.width; i+=50) {
                ctx.beginPath(); ctx.moveTo(i,0); ctx.lineTo(i,canvas.height); ctx.stroke();
            }
            for(let i=0; i<canvas.height; i+=50) {
                ctx.beginPath(); ctx.moveTo(0,i); ctx.lineTo(canvas.width,i); ctx.stroke();
            }

            // Draw Satellites & Signals
            sats.forEach(s => {
                // Signal Radius
                ctx.beginPath();
                ctx.arc(s.x, s.y, s.r, 0, Math.PI*2);
                ctx.strokeStyle = s.color;
                ctx.lineWidth = 2;
                ctx.stroke();
                ctx.fillStyle = s.color + '22'; // Transparent fill
                ctx.fill();

                // Satellite Icon
                ctx.font = "20px Arial";
                ctx.fillStyle = "white";
                ctx.fillText("üõ∞Ô∏è", s.x-10, s.y+5);
            });

            // Find Intersection (Approximate visual)
            // Just blending mode for visual "Overlap"
            ctx.globalCompositeOperation = 'lighter';
            sats.forEach(s => {
                ctx.beginPath();
                ctx.arc(s.x, s.y, s.r, 0, Math.PI*2);
                ctx.fillStyle = '#111';
                ctx.fill();
            });
            ctx.globalCompositeOperation = 'source-over';

            requestAnimationFrame(draw);
        }
        draw();

        // Bonus: "Accuracy Visualizer" random walk (Keep it simpler elsewhere if needed, but we replaced it)
    </script>
</body>
</html>
