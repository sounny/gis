<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lab [NUM]: [TITLE] | GIS Lab Manual</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="css/lab.css">
</head>
<body>

    <header class="lab-header">
        <div class="container">
            
            <span class="lab-badge">Lab [NUM]</span>
            <h1>[LAB TITLE]</h1>
            <p class="subtitle">[Brief 1-sentence mission statement for the lab]</p>
        </div>
    </header>
    <!-- STICKY NAVIGATION BAR -->
    <nav class="sticky-chapter-bar">
      <div class="nav-container">
        <div class="nav-left">
          <span class="nav-chapter-num">Lab [NUM]</span>
        </div>
        <div class="nav-center">
          <span class="nav-current-title">[LAB TITLE]</span>
        </div>
        <div class="nav-right">
          <a href="index.html" class="nav-toc-btn" title="Table of Contents">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>
            <span class="toc-text">TOC</span>
          </a>
        </div>
      </div>
      <div class="nav-progress-bar"></div>
    </nav>


    <main class="container">
        <!-- 1. Learning Objectives -->
        <section class="card">
            <h2>üéØ Learning Objectives</h2>
            <ul>
                <li>[Objective 1]</li>
                <li>[Objective 2]</li>
                <li>[Objective 3]</li>
            </ul>
        </section>

        <!-- 2. Scenario & Data -->
        <section class="card">
            <h2>üìÇ Scenario & Requirements</h2>
            <p>[Describe the real-world problem or research question]</p>
            
            <div class="data-download-card">
                <div>
                    <strong>Data Package:</strong> <code>[filename].zip</code>
                    <p style="margin:0; font-size: 0.85rem; color: #64748b;">Contains Shapefiles, GeoJSON, and CSV</p>
                </div>
                <a href="#" class="btn btn-primary">Download Data</a>
            </div>
        </section>

        <!-- 3. Instructions (The Switcher) -->
        <h2>üõ†Ô∏è Step-by-Step Instructions</h2>
        <p>Select your preferred GIS platform to view instructions:</p>

        <nav class="platform-switcher">
            <button class="tab-btn active" data-platform="arcgis">
                <span class="icon">üü¶</span> ArcGIS Pro
            </button>
            <button class="tab-btn" data-platform="qgis">
                <span class="icon">üü© QGIS</span>
            </button>
            <button class="tab-btn" data-platform="web">
                <span class="icon">üüß Web GIS</span>
            </button>
        </nav>

        <!-- ArcGIS Pro Pane -->
        <div class="instruction-pane active" data-platform="arcgis">
            <div class="step">
                <div class="step-num">1</div>
                <div class="step-content">
                    <h3>Setting up the Project</h3>
                    <p>Open ArcGIS Pro and create a new Map project. Extract your downloaded data to your project folder...</p>
                </div>
            </div>
            <!-- Add more steps -->
        </div>

        <!-- QGIS Pane -->
        <div class="instruction-pane" data-platform="qgis">
            <div class="step">
                <div class="step-num">1</div>
                <div class="step-content">
                    <h3>Importing Data</h3>
                    <p>Open QGIS. Drag and drop the GeoJSON files into the layers panel...</p>
                </div>
            </div>
            <!-- Add more steps -->
        </div>

        <!-- Web GIS Pane -->
        <div class="instruction-pane" data-platform="web">
            <div class="step">
                <div class="step-num">1</div>
                <div class="step-content">
                    <h3>ArcGIS Online Setup</h3>
                    <p>Log in to your ArcGIS Public Account. Click 'Map' to open the classic Map Viewer...</p>
                </div>
            </div>
            <!-- Add more steps -->
        </div>

        <!-- 4. Deliverables -->
        <section class="card" style="margin-top: 4rem; border-top: 4px solid var(--accent);">
            <h2>‚úÖ Submission & Assessment</h2>
            <p>To complete this lab, you must submit:</p>
            <ul>
                <li>[Deliverable 1: e.g. A screenshot of your final map]</li>
                <li>[Deliverable 2: e.g. A CSV of your calculated statistics]</li>
            </ul>
            <div class="callout warning">
                <strong>Quality Check:</strong> Ensure your map includes a Title, Legend, and North Arrow before exporting.
            </div>
        </section>

    </main>

    <footer>
        <div class="container">
            <p>&copy; 2026 Dr. Moulay Anwar Sounny-Slitine | GIS Lab Manual</p>
        </div>
    </footer>

    <script src="js/lab-switcher.js"></script>

    <!-- DYNAMIC NAV SCRIPT -->
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const navTitle = document.querySelector('.nav-current-title');
        const defaultTitle = "[LAB TITLE]"; // Dynamic default
        const sections = document.querySelectorAll('main h2');
        const navBar = document.querySelector('.sticky-chapter-bar');
        const progressBar = document.querySelector('.nav-progress-bar');
        
        // 1. Scroll Progress Bar
        window.addEventListener('scroll', () => {
          const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
          const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
          const scrolled = (winScroll / height) * 100;
          if (progressBar) progressBar.style.width = scrolled + "%";
          
          if (window.scrollY > 200) {
            navBar.classList.add('is-stuck');
          } else {
            navBar.classList.remove('is-stuck');
          }
        });

        // 2. Section Observer for Dynamic Title
        const observerOptions = {
          root: null,
          rootMargin: '-80px 0px -70% 0px',
          threshold: 0
        };

        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              const newText = entry.target.innerText;
              if (navTitle.textContent !== newText) {
                  navTitle.style.opacity = 0;
                  setTimeout(() => {
                    navTitle.textContent = newText;
                    navTitle.style.opacity = 1;
                  }, 200);
              }
            }
          });
        }, observerOptions);

        sections.forEach(section => {
          observer.observe(section);
        });
        
        // Reset to default
        window.addEventListener('scroll', () => {
          if (window.scrollY < 150) {
             if (navTitle.textContent !== defaultTitle) {
               navTitle.style.opacity = 0;
               setTimeout(() => {
                 navTitle.textContent = defaultTitle;
                 navTitle.style.opacity = 1;
               }, 200);
             }
          }
        });
      });
    </script>

</body>
</html>
